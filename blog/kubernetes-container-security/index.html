<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-WCL38PDP');</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Guia completo de seguranca em Kubernetes e containers: hardening de clusters, network policies, RBAC, image scanning, runtime security, secrets management e melhores práticas de produção.">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="keywords" content="kubernetes security, container security, k8s hardening, network policies, RBAC kubernetes, image scanning, trivy, falco, runtime security, secrets management, pod security, DevSecOps containers">
    <meta name="author" content="Inteligencia Brasil">
    <meta name="theme-color" content="#0D1E38">
    <link rel="canonical" href="https://inteligenciabrasil.seg.br/blog/kubernetes-container-security/">

    <meta property="og:title" content="Seguranca em Kubernetes e Containers: Guia Completo">
    <meta property="og:description" content="Hardening de K8s, network policies, RBAC, scanning e runtime security.">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://inteligenciabrasil.seg.br/blog/kubernetes-container-security/">
    <meta property="og:image" content="https://inteligenciabrasil.seg.br/img/og-image.png">
    <meta property="og:locale" content="pt_BR">
    <meta property="og:site_name" content="Inteligencia Brasil">
    <meta property="article:published_time" content="2026-01-31T18:00:00-03:00">
    <meta property="article:section" content="DevSecOps">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Seguranca em Kubernetes e Containers">
    <meta name="twitter:description" content="Guia completo de hardening e seguranca para ambientes containerizados.">

    <link rel="icon" type="image/svg+xml" href="../../img/favicon.svg">
    <link rel="shortcut icon" type="image/x-icon" href="../../img/favicon.ico">

    <title>Seguranca em Kubernetes e Containers: Guia Completo | Inteligencia Brasil</title>

    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Article",
        "headline": "Seguranca em Kubernetes e Containers: Guia Completo",
        "description": "Guia completo de seguranca em Kubernetes e containers: hardening, network policies, RBAC e runtime security.",
        "image": "https://inteligenciabrasil.seg.br/img/og-image.png",
        "author": {"@type": "Organization", "name": "Inteligencia Brasil"},
        "publisher": {"@type": "Organization", "name": "Inteligencia Brasil", "logo": {"@type": "ImageObject", "url": "https://inteligenciabrasil.seg.br/img/logo-inteligencia-brasil-seguranca-da-informacao-cyber-security.png"}},
        "datePublished": "2026-01-31",
        "dateModified": "2026-01-31",
        "mainEntityOfPage": {"@type": "WebPage", "@id": "https://inteligenciabrasil.seg.br/blog/kubernetes-container-security/"}
    }
    </script>

    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "Quais as principais vulnerabilidades em Kubernetes?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "As principais sao: containers rodando como root, imagens com vulnerabilidades conhecidas, secrets expostos em variaveis de ambiente, RBAC permissivo demais, falta de network policies (pods comunicando livremente), API server exposto publicamente, ausencia de pod security policies/standards, e mount de volumes sensiveis do host."
                }
            },
            {
                "@type": "Question",
                "name": "Qual a diferenca entre Pod Security Policy e Pod Security Standards?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "PodSecurityPolicy (PSP) foi deprecado no K8s 1.21 e removido no 1.25. Foi substituido por Pod Security Standards (PSS) com tres niveis: Privileged (sem restricoes), Baseline (previne escalacao conhecida), e Restricted (hardening maximo). PSS e enforced via Pod Security Admission controller no namespace."
                }
            },
            {
                "@type": "Question",
                "name": "Como proteger secrets no Kubernetes?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Kubernetes Secrets sao base64 encoded, nao criptografados por padrao. Habilite encryption at rest no etcd. Use external secret stores (Vault, AWS Secrets Manager) com operadores como External Secrets Operator. Monte secrets como volumes (nao env vars). Implemente RBAC restritivo para acesso a secrets. Rotacione secrets regularmente."
                }
            }
        ]
    }
    </script>

    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {"@type": "ListItem", "position": 1, "name": "Home", "item": "https://inteligenciabrasil.seg.br/"},
            {"@type": "ListItem", "position": 2, "name": "Blog", "item": "https://inteligenciabrasil.seg.br/blog/"},
            {"@type": "ListItem", "position": 3, "name": "Kubernetes Security"}
        ]
    }
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="../../css/bootstrap.css" rel="stylesheet">
    <link href="../../css/fontawesome-all.css" rel="stylesheet">
    <link href="../../css/styles.css" rel="stylesheet">
    <style>
        body{background:#0a1628}.navbar-custom{background:rgba(13,30,56,.95)!important;border-bottom:1px solid rgba(96,165,250,.1);backdrop-filter:blur(20px)}.navbar-custom.top-nav-collapse{background:rgba(10,22,40,.98)!important}.navbar-custom .nav-link{color:#F1F5F9!important}.navbar-custom .nav-link:hover{color:#60A5FA!important}.article-header{background:linear-gradient(135deg,#0D1E38 0%,#1a3a5c 50%,#0D1E38 100%);padding:140px 0 60px;position:relative}.article-header::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%2360A5FA' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");pointer-events:none}.article-header h1{color:#F1F5F9;font-size:2.5rem;font-weight:700;margin-bottom:20px;line-height:1.3}.article-category{display:inline-block;background:linear-gradient(135deg,#3B82F6 0%,#1D4ED8 100%);color:#fff;padding:6px 16px;border-radius:20px;font-size:.85rem;font-weight:600;margin-bottom:20px;text-transform:uppercase;letter-spacing:1px}.article-meta{display:flex;flex-wrap:wrap;gap:20px;color:#94A3B8;font-size:.95rem}.article-meta span{display:flex;align-items:center;gap:8px}.breadcrumb-nav{background:rgba(13,30,56,.8);padding:15px 0;border-bottom:1px solid rgba(96,165,250,.1)}.breadcrumb{background:0 0;margin:0;padding:0}.breadcrumb-item,.breadcrumb-item a{color:#94A3B8;font-size:.9rem}.breadcrumb-item a:hover{color:#60A5FA}.breadcrumb-item.active{color:#F1F5F9}.article-content{background:#0a1628;padding:60px 0}.article-body{max-width:800px;margin:0 auto}.article-body h2{color:#F1F5F9;font-size:1.8rem;margin:40px 0 20px;padding-bottom:10px;border-bottom:2px solid rgba(96,165,250,.3)}.article-body h3{color:#F1F5F9;font-size:1.4rem;margin:30px 0 15px}.article-body h4{color:#60A5FA;font-size:1.15rem;margin:25px 0 12px}.article-body p{color:#CBD5E1;font-size:1.1rem;line-height:1.8;margin-bottom:20px}.article-body a{color:#60A5FA;text-decoration:none;border-bottom:1px solid transparent;transition:border-color .3s}.article-body a:hover{border-bottom-color:#60A5FA}.article-body strong{color:#60A5FA}.article-body ul,.article-body ol{color:#CBD5E1;margin-bottom:20px;padding-left:25px}.article-body li{margin-bottom:10px;line-height:1.7}.toc{background:linear-gradient(145deg,#0f2035 0%,#0D1E38 100%);border:1px solid rgba(96,165,250,.2);border-radius:12px;padding:25px;margin-bottom:40px}.toc h2{color:#F1F5F9;font-size:1.1rem;margin-bottom:15px;display:flex;align-items:center;gap:10px}.toc ul{list-style:none;padding:0;margin:0}.toc li{margin-bottom:8px}.toc a{color:#94A3B8;text-decoration:none;font-size:.95rem}.toc a:hover{color:#60A5FA}.concept-card{background:linear-gradient(145deg,#0f2035 0%,#0D1E38 100%);border-radius:12px;padding:25px;margin:25px 0;border-left:4px solid #60A5FA}.stat-highlight{background:linear-gradient(145deg,rgba(59,130,246,.1) 0%,rgba(29,78,216,.05) 100%);border:1px solid rgba(59,130,246,.3);border-radius:12px;padding:20px;margin:25px 0;text-align:center}.stat-highlight .number{font-size:2.5rem;font-weight:700;color:#3B82F6}.stat-highlight .label{color:#94A3B8;font-size:.95rem}.code-box{background:#0d1117;border:1px solid rgba(96,165,250,.2);border-radius:12px;padding:20px;margin:25px 0;overflow-x:auto}.code-box pre{margin:0;color:#c9d1d9;font-family:'Fira Code',monospace;font-size:.85rem;line-height:1.6}.code-box code{color:#c9d1d9}.code-box .comment{color:#8b949e}.code-box .keyword{color:#ff7b72}.code-box .string{color:#a5d6ff}.code-box .function{color:#d2a8ff}.security-layer{background:linear-gradient(145deg,rgba(16,185,129,.1) 0%,rgba(5,150,105,.05) 100%);border:1px solid rgba(16,185,129,.3);border-radius:12px;padding:25px;margin:25px 0}.security-layer h4{color:#10B981;margin-top:0}.tool-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin:25px 0}.tool-card{background:linear-gradient(145deg,#0f2035 0%,#0D1E38 100%);border:1px solid rgba(96,165,250,.2);border-radius:8px;padding:20px}.tool-card h5{color:#F1F5F9;margin-bottom:8px;font-size:1rem}.tool-card p{color:#94A3B8;font-size:.9rem;margin:0}.tool-card .tag{display:inline-block;background:rgba(96,165,250,.2);color:#60A5FA;padding:2px 8px;border-radius:4px;font-size:.75rem;margin-top:8px}.warning-box{background:linear-gradient(145deg,rgba(245,158,11,.1) 0%,rgba(217,119,6,.05) 100%);border:1px solid rgba(245,158,11,.3);border-radius:12px;padding:25px;margin:25px 0}.warning-box h4{color:#f59e0b;margin-top:0}.tip-box{background:linear-gradient(145deg,rgba(96,165,250,.1) 0%,rgba(59,130,246,.05) 100%);border:1px solid rgba(96,165,250,.3);border-radius:12px;padding:25px;margin:25px 0}.tip-box h4{color:#60A5FA;margin-top:0}.faq-section{margin:40px 0}.faq-item{background:linear-gradient(145deg,#0f2035 0%,#0D1E38 100%);border:1px solid rgba(96,165,250,.2);border-radius:12px;margin-bottom:15px;overflow:hidden}.faq-question{padding:20px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;color:#F1F5F9;font-weight:600}.faq-question:hover{background:rgba(96,165,250,.05)}.faq-answer{padding:0 20px 20px;color:#CBD5E1;display:none}.faq-item.active .faq-answer{display:block}.faq-item.active .faq-icon{transform:rotate(180deg)}.faq-icon{transition:transform .3s;color:#60A5FA}.cta-box{background:linear-gradient(145deg,rgba(96,165,250,.1) 0%,rgba(59,130,246,.05) 100%);border:1px solid rgba(96,165,250,.3);border-radius:12px;padding:30px;margin:40px 0;text-align:center}.cta-box h3{color:#F1F5F9;margin-bottom:15px}.cta-box p{color:#94A3B8;margin-bottom:20px}.cta-btn{display:inline-block;background:linear-gradient(135deg,#60A5FA 0%,#3B82F6 100%);color:#fff;padding:12px 30px;border-radius:8px;text-decoration:none;font-weight:600;transition:all .3s}.cta-btn:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(96,165,250,.4);color:#fff}.author-box{background:linear-gradient(145deg,#0f2035 0%,#0D1E38 100%);border:1px solid rgba(96,165,250,.2);border-radius:12px;padding:30px;margin:50px 0;display:flex;gap:25px;align-items:center}.author-box img{width:80px;height:80px;border-radius:50%}.author-info h4{color:#F1F5F9;margin-bottom:5px}.author-info p{color:#94A3B8;font-size:.95rem;margin:0}.share-buttons{display:flex;gap:15px;margin:40px 0;flex-wrap:wrap}.share-btn{display:flex;align-items:center;gap:8px;padding:10px 20px;border-radius:8px;font-size:.9rem;font-weight:500;text-decoration:none;transition:all .3s}.share-btn.linkedin{background:#0077B5;color:#fff}.share-btn.twitter{background:#1DA1F2;color:#fff}.share-btn.whatsapp{background:#25D366;color:#fff}.share-btn:hover{transform:translateY(-2px);opacity:.9}.footer-section { background: #0D1E38; padding: 60px 0 30px; border-top: 1px solid rgba(96, 165, 250, 0.1); }
        .footer-about p, .footer-contact p, .footer-links a { color: #94A3B8; }
        .footer-links h4, .footer-contact h4 { color: #F1F5F9; }
        .footer-bottom { border-top: 1px solid rgba(96, 165, 250, 0.1); padding-top: 20px; margin-top: 40px; color: #64748B; }
        .footer-bottom a { color: #94A3B8; }
       .footer-social { display: flex; gap: 15px; margin-top: 20px; }
        .footer-social a { width: 40px; height: 40px; background: rgba(96, 165, 250, 0.1); border: 1px solid rgba(96, 165, 250, 0.2); border-radius: 50%; display: flex; justify-content: center; align-items: center; color: #60A5FA; font-size: 1.1rem; transition: all 0.3s ease; text-decoration: none; }
        .footer-social a:hover { background: #60A5FA; border-color: #60A5FA; color: #0D1E38; transform: translateY(-3px); }
    </style>
</head>

<body>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WCL38PDP" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

    <nav class="navbar navbar-expand-md navbar-dark navbar-custom fixed-top">
        <a class="navbar-brand logo-image" href="../../"><img src="../../img/logo.svg" alt="Logo Inteligencia Brasil" width="196" height="113"></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault"><span class="navbar-toggler-awesome fas fa-bars"></span><span class="navbar-toggler-awesome fas fa-times"></span></button>
        <div class="collapse navbar-collapse" id="navbarsExampleDefault">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item"><a class="nav-link" href="../../">HOME</a></li>
                <li class="nav-item"><a class="nav-link" href="../../#servicos">SERVICOS</a></li>
                <li class="nav-item"><a class="nav-link active" href="../">BLOG</a></li>
                <li class="nav-item"><a class="nav-link" href="../../#contato">CONTATO</a></li>
            </ul>
            <span class="nav-item social-icons"><span class="fa-stack"><a href="https://www.linkedin.com/company/inteligenciabrasil" target="_blank" rel="noopener"><span class="hexagon"></span><i class="fab fa-linkedin-in fa-stack-1x"></i></a></span></span>
        </div>
    </nav>

    <header class="article-header">
        <div class="container">
            <span class="article-category">DevSecOps</span>
            <h1>Seguranca em Kubernetes e Containers: Guia Completo de Hardening</h1>
            <div class="article-meta">
                <span><i class="far fa-calendar"></i> Janeiro 2026</span>
                <span><i class="far fa-clock"></i> 25 min de leitura</span>
                <span><i class="far fa-building"></i> Inteligencia Brasil</span>
            </div>
        </div>
    </header>

    <nav class="breadcrumb-nav" aria-label="breadcrumb">
        <div class="container">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="../../">Home</a></li>
                <li class="breadcrumb-item"><a href="../">Blog</a></li>
                <li class="breadcrumb-item active">Kubernetes Security</li>
            </ol>
        </div>
    </nav>

    <article class="article-content">
        <div class="container">
            <div class="article-body">
                <div class="toc">
                    <h2><i class="fas fa-list" style="color:#60A5FA"></i> Neste artigo</h2>
                    <ul>
                        <li><a href="#ameacas">Modelo de ameacas em K8s</a></li>
                        <li><a href="#imagens">Seguranca de imagens</a></li>
                        <li><a href="#cluster">Hardening do cluster</a></li>
                        <li><a href="#rbac">RBAC e autenticacao</a></li>
                        <li><a href="#network">Network Policies</a></li>
                        <li><a href="#runtime">Runtime security</a></li>
                        <li><a href="#secrets">Gestao de secrets</a></li>
                        <li><a href="#ferramentas">Ferramentas essenciais</a></li>
                        <li><a href="#faq">Perguntas frequentes</a></li>
                        <li><a href="#conclusao">Conclusao</a></li>
                    </ul>
                </div>

                <h2 id="ameacas">Modelo de Ameacas em Kubernetes</h2>

                <p>
                    <strong>Kubernetes</strong> revolucionou como deployamos aplicacoes, mas tambem introduziu nova superfície de ataque. Antes de implementar controles, e essencial entender o modelo de ameacas especifico de ambientes containerizados.
                </p>

                <div class="stat-highlight">
                    <div class="number">94%</div>
                    <div class="label">das organizações tiveram incidente de seguranca em containers em 2025 (Red Hat State of Kubernetes Security)</div>
                </div>

                <div class="concept-card">
                    <h4><i class="fas fa-skull-crossbones" style="color:#60A5FA;margin-right:10px"></i> Vetores de ataque comuns</h4>
                    <ul>
                        <li><strong>Imagem comprometida:</strong> Vulnerabilidades em base images, dependencias maliciosas</li>
                        <li><strong>Escape de container:</strong> Privilegios excessivos permitem acesso ao host</li>
                        <li><strong>Lateral movement:</strong> Pod comprometido ataca outros pods/services</li>
                        <li><strong>Supply chain:</strong> Componentes maliciosos no build pipeline</li>
                        <li><strong>Secrets exposure:</strong> Credenciais vazadas em logs, env vars, configmaps</li>
                        <li><strong>API server abuse:</strong> RBAC permissivo permite escalacao</li>
                        <li><strong>etcd exposure:</strong> Acesso direto ao banco de dados do cluster</li>
                    </ul>
                </div>

                <h3>Camadas de seguranca (Defense in Depth)</h3>

                <p>
                    Seguranca em Kubernetes deve ser implementada em multiplas camadas:
                </p>

                <ol>
                    <li><strong>Build time:</strong> Imagens seguras, scanning, assinaturas</li>
                    <li><strong>Deploy time:</strong> Admission control, policies</li>
                    <li><strong>Runtime:</strong> Monitoramento, deteccao de anomalias</li>
                    <li><strong>Infrastructure:</strong> Host hardening, network segregation</li>
                </ol>

                <h2 id="imagens">Seguranca de Imagens de Container</h2>

                <p>
                    A seguranca comeca bem antes do deploy - na construcao da imagem.
                </p>

                <h3>Melhores práticas de Dockerfile</h3>

                <div class="code-box">
                    <pre><span class="comment"># Use base image minima e especifica (nao :latest)</span>
<span class="keyword">FROM</span> cgr.dev/chainguard/python:latest-dev <span class="keyword">AS</span> builder
<span class="keyword">WORKDIR</span> /app
<span class="keyword">COPY</span> requirements.txt .
<span class="keyword">RUN</span> pip install --no-cache-dir -r requirements.txt

<span class="comment"># Multi-stage build - imagem final minima</span>
<span class="keyword">FROM</span> cgr.dev/chainguard/python:latest
<span class="keyword">WORKDIR</span> /app
<span class="keyword">COPY</span> --from=builder /app .
<span class="keyword">COPY</span> . .

<span class="comment"># Usuario nao-root</span>
<span class="keyword">USER</span> nonroot:nonroot

<span class="comment"># Nao precisa de shell para maioria das apps</span>
<span class="keyword">ENTRYPOINT</span> [<span class="string">"python"</span>, <span class="string">"app.py"</span>]</pre>
                </div>

                <h3>Checklist de imagem segura</h3>

                <ul>
                    <li>[ ] Base image minima (distroless, alpine, chainguard)</li>
                    <li>[ ] Tag especifica (nunca :latest em producao)</li>
                    <li>[ ] Multi-stage build para reduzir tamanho</li>
                    <li>[ ] Usuario nao-root (USER nonroot)</li>
                    <li>[ ] Sem shell se possivel</li>
                    <li>[ ] Sem ferramentas de debug em producao</li>
                    <li>[ ] COPY especifico (nao COPY . .)</li>
                    <li>[ ] Dependencias pinadas com hashes</li>
                </ul>

                <h3>Image scanning no CI/CD</h3>

                <p>
                    Integre scanning automatico no pipeline para bloquear imagens vulneraveis:
                </p>

                <div class="code-box">
                    <pre><span class="comment"># Exemplo: GitHub Actions com Trivy</span>
- name: Scan image
  uses: aquasecurity/trivy-action@master
  with:
    image-ref: '${{ env.IMAGE }}'
    format: 'sarif'
    severity: 'CRITICAL,HIGH'
    exit-code: '1'  <span class="comment"># Falha o build se encontrar critical/high</span></pre>
                </div>

                <h3>Assinatura e verificacao de imagens</h3>

                <p>
                    Use <strong>Sigstore/Cosign</strong> para assinar e verificar imagens:
                </p>

                <div class="code-box">
                    <pre><span class="comment"># Assinar imagem</span>
cosign sign --key cosign.key myregistry.io/myapp:v1.2.3

<span class="comment"># Verificar antes de deploy (admission controller)</span>
cosign verify --key cosign.pub myregistry.io/myapp:v1.2.3</pre>
                </div>

                <h2 id="cluster">Hardening do Cluster Kubernetes</h2>

                <h3>API Server</h3>

                <ul>
                    <li><strong>Autenticacao:</strong> Desabilite autenticacao anonima (<code>--anonymous-auth=false</code>)</li>
                    <li><strong>Autorizacao:</strong> Use RBAC, nunca AlwaysAllow</li>
                    <li><strong>Audit logging:</strong> Habilite para rastrear todas as chamadas</li>
                    <li><strong>TLS:</strong> Certificados validos para todas as comunicacoes</li>
                    <li><strong>Acesso:</strong> Nao exponha API server publicamente</li>
                </ul>

                <h3>etcd</h3>

                <ul>
                    <li><strong>Encryption at rest:</strong> Criptografe secrets no etcd</li>
                    <li><strong>TLS:</strong> Comunicacao criptografada com API server</li>
                    <li><strong>Acesso:</strong> Isole etcd da rede de pods</li>
                    <li><strong>Backup:</strong> Backups criptografados regulares</li>
                </ul>

                <div class="code-box">
                    <pre><span class="comment"># EncryptionConfiguration para secrets</span>
apiVersion: apiserver.config.k8s.io/v1
kind: EncryptionConfiguration
resources:
  - resources:
      - secrets
    providers:
      - aescbc:
          keys:
            - name: key1
              secret: <span class="string">&lt;base64-encoded-key&gt;</span>
      - identity: {}</pre>
                </div>

                <h3>Kubelet</h3>

                <ul>
                    <li><strong>Autenticacao:</strong> Webhook ou certificados (nunca anonimo)</li>
                    <li><strong>Read-only port:</strong> Desabilite (<code>--read-only-port=0</code>)</li>
                    <li><strong>Protect kernel defaults:</strong> <code>--protect-kernel-defaults=true</code></li>
                </ul>

                <h2 id="rbac">RBAC e Controle de Acesso</h2>

                <p>
                    <strong>RBAC (Role-Based Access Control)</strong> e fundamental para seguranca em K8s. O principio: minimo privilegio.
                </p>

                <h3>Estrutura do RBAC</h3>

                <ul>
                    <li><strong>Role/ClusterRole:</strong> Define permissoes (verbs em resources)</li>
                    <li><strong>RoleBinding/ClusterRoleBinding:</strong> Liga roles a usuarios/serviceaccounts</li>
                    <li><strong>ServiceAccount:</strong> Identidade para pods</li>
                </ul>

                <div class="code-box">
                    <pre><span class="comment"># Role restritivo para aplicacao</span>
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  namespace: myapp
  name: myapp-role
rules:
- apiGroups: [<span class="string">""</span>]
  resources: [<span class="string">"configmaps"</span>]
  resourceNames: [<span class="string">"myapp-config"</span>]  <span class="comment"># Apenas configmap especifico</span>
  verbs: [<span class="string">"get"</span>]
- apiGroups: [<span class="string">""</span>]
  resources: [<span class="string">"secrets"</span>]
  resourceNames: [<span class="string">"myapp-secret"</span>]
  verbs: [<span class="string">"get"</span>]
---
<span class="comment"># ServiceAccount dedicada</span>
apiVersion: v1
kind: ServiceAccount
metadata:
  name: myapp-sa
  namespace: myapp
automountServiceAccountToken: false  <span class="comment"># Desabilitar se nao precisar</span></pre>
                </div>

                <div class="warning-box">
                    <h4><i class="fas fa-exclamation-triangle" style="margin-right:10px"></i> RBAC anti-patterns</h4>
                    <ul>
                        <li>Usar <code>cluster-admin</code> para tudo</li>
                        <li>Wildcards em resources/verbs (<code>*</code>)</li>
                        <li>Bindings em namespace <code>kube-system</code></li>
                        <li>Deixar serviceaccount default com permissoes</li>
                        <li>Permitir <code>escalate</code>, <code>bind</code>, <code>impersonate</code></li>
                    </ul>
                </div>

                <h3>Audit de RBAC</h3>

                <p>
                    Use ferramentas para identificar permissoes excessivas:
                </p>

                <div class="code-box">
                    <pre><span class="comment"># kubectl-who-can: quem pode fazer o que</span>
kubectl who-can create pods --all-namespaces
kubectl who-can get secrets -n production

<span class="comment"># rbac-tool: visualizar e auditar</span>
rbac-tool lookup --kind ServiceAccount
rbac-tool viz --outformat dot | dot -Tpng > rbac.png</pre>
                </div>

                <h2 id="network">Network Policies</h2>

                <p>
                    Por padrao, todos os pods podem comunicar com todos. <strong>Network Policies</strong> implementam segmentacao:
                </p>

                <div class="code-box">
                    <pre><span class="comment"># Default deny all - ponto de partida</span>
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: default-deny-all
  namespace: production
spec:
  podSelector: {}
  policyTypes:
    - Ingress
    - Egress
---
<span class="comment"># Permitir apenas trafego necessario</span>
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-frontend-to-backend
  namespace: production
spec:
  podSelector:
    matchLabels:
      app: backend
  policyTypes:
    - Ingress
  ingress:
    - from:
        - podSelector:
            matchLabels:
              app: frontend
      ports:
        - protocol: TCP
          port: 8080</pre>
                </div>

                <h3>Estratégia de implementação</h3>

                <ol>
                    <li>Comece em modo observacao (log, nao block)</li>
                    <li>Mapeie fluxos de comunicacao reais</li>
                    <li>Implemente default-deny por namespace</li>
                    <li>Adicione allowlists especificas</li>
                    <li>Monitore e ajuste continuamente</li>
                </ol>

                <div class="tip-box">
                    <h4><i class="fas fa-lightbulb" style="margin-right:10px"></i> CNI e Network Policies</h4>
                    <p>Nem todo CNI suporta Network Policies. Verifique compatibilidade: Calico, Cilium e Weave suportam. Flannel nao suporta nativamente. Cilium oferece L7 policies (HTTP, gRPC) alem de L3/L4.</p>
                </div>

                <h2 id="runtime">Runtime Security</h2>

                <h3>Pod Security Standards (PSS)</h3>

                <p>
                    Pod Security Standards substituiu PodSecurityPolicy (removido no K8s 1.25). Tres niveis:
                </p>

                <ul>
                    <li><strong>Privileged:</strong> Sem restricoes (apenas para system pods)</li>
                    <li><strong>Baseline:</strong> Previne escalacao conhecida (minimo para producao)</li>
                    <li><strong>Restricted:</strong> Hardening maximo (recomendado)</li>
                </ul>

                <div class="code-box">
                    <pre><span class="comment"># Aplicar PSS no namespace</span>
apiVersion: v1
kind: Namespace
metadata:
  name: production
  labels:
    pod-security.kubernetes.io/enforce: restricted
    pod-security.kubernetes.io/audit: restricted
    pod-security.kubernetes.io/warn: restricted</pre>
                </div>

                <h3>SecurityContext no Pod</h3>

                <div class="code-box">
                    <pre>apiVersion: v1
kind: Pod
metadata:
  name: secure-pod
spec:
  securityContext:
    runAsNonRoot: true
    runAsUser: 1000
    runAsGroup: 1000
    fsGroup: 1000
    seccompProfile:
      type: RuntimeDefault
  containers:
    - name: app
      image: myapp:v1
      securityContext:
        allowPrivilegeEscalation: false
        readOnlyRootFilesystem: true
        capabilities:
          drop:
            - ALL
      resources:
        limits:
          memory: <span class="string">"256Mi"</span>
          cpu: <span class="string">"500m"</span>
        requests:
          memory: <span class="string">"128Mi"</span>
          cpu: <span class="string">"100m"</span></pre>
                </div>

                <h3>Runtime detection com Falco</h3>

                <p>
                    <strong>Falco</strong> detecta comportamentos anomalos em runtime usando regras baseadas em syscalls:
                </p>

                <ul>
                    <li>Shell spawned in container</li>
                    <li>File written to sensitive directory</li>
                    <li>Unexpected network connection</li>
                    <li>Container drift (arquivo criado que nao estava na imagem)</li>
                    <li>Privilege escalation attempt</li>
                </ul>

                <h2 id="secrets">Gestao de Secrets</h2>

                <p>
                    Kubernetes Secrets sao base64 encoded, <strong>não criptografados por padrão</strong>. Melhores práticas:
                </p>

                <h3>Encryption at rest</h3>

                <p>
                    Habilite criptografia de secrets no etcd (EncryptionConfiguration mostrado anteriormente).
                </p>

                <h3>External secret stores</h3>

                <p>
                    Use secret managers externos com operadores:
                </p>

                <div class="code-box">
                    <pre><span class="comment"># External Secrets Operator - sincroniza do AWS Secrets Manager</span>
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: database-credentials
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: aws-secrets-manager
    kind: ClusterSecretStore
  target:
    name: db-secret
  data:
    - secretKey: password
      remoteRef:
        key: production/database
        property: password</pre>
                </div>

                <h3>Melhores práticas de secrets</h3>

                <ul>
                    <li>Monte como volume, nao env var (evita logging acidental)</li>
                    <li>RBAC restritivo para acesso a secrets</li>
                    <li>Rotacao automatica com external stores</li>
                    <li>Audit logging de acesso a secrets</li>
                    <li>Nunca commite secrets em git (use sealed-secrets se necessario)</li>
                </ul>

                <h2 id="ferramentas">Ferramentas Essenciais de Seguranca K8s</h2>

                <div class="tool-grid">
                    <div class="tool-card">
                        <h5><i class="fas fa-search" style="color:#60A5FA;margin-right:8px"></i> Trivy</h5>
                        <p>Scanner de vulnerabilidades em imagens, IaC, filesystems. Open source da Aqua.</p>
                        <span class="tag">Scanning</span>
                    </div>
                    <div class="tool-card">
                        <h5><i class="fas fa-eye" style="color:#60A5FA;margin-right:8px"></i> Falco</h5>
                        <p>Runtime security e deteccao de anomalias baseada em syscalls.</p>
                        <span class="tag">Runtime</span>
                    </div>
                    <div class="tool-card">
                        <h5><i class="fas fa-shield-alt" style="color:#60A5FA;margin-right:8px"></i> OPA/Gatekeeper</h5>
                        <p>Policy engine para admission control. Enforce policies como codigo.</p>
                        <span class="tag">Policy</span>
                    </div>
                    <div class="tool-card">
                        <h5><i class="fas fa-network-wired" style="color:#60A5FA;margin-right:8px"></i> Cilium</h5>
                        <p>CNI com eBPF, network policies L3-L7, observabilidade.</p>
                        <span class="tag">Network</span>
                    </div>
                    <div class="tool-card">
                        <h5><i class="fas fa-key" style="color:#60A5FA;margin-right:8px"></i> Vault</h5>
                        <p>Secret management com integracao nativa K8s, rotacao automatica.</p>
                        <span class="tag">Secrets</span>
                    </div>
                    <div class="tool-card">
                        <h5><i class="fas fa-check-double" style="color:#60A5FA;margin-right:8px"></i> Kube-bench</h5>
                        <p>Verifica compliance com CIS Kubernetes Benchmark.</p>
                        <span class="tag">Compliance</span>
                    </div>
                    <div class="tool-card">
                        <h5><i class="fas fa-signature" style="color:#60A5FA;margin-right:8px"></i> Sigstore/Cosign</h5>
                        <p>Assinatura e verificacao de imagens e artefatos.</p>
                        <span class="tag">Supply Chain</span>
                    </div>
                    <div class="tool-card">
                        <h5><i class="fas fa-cube" style="color:#60A5FA;margin-right:8px"></i> Kubescape</h5>
                        <p>Scanner de misconfiguration, NSA/MITRE frameworks.</p>
                        <span class="tag">Scanning</span>
                    </div>
                </div>

                <h2 id="faq">Perguntas Frequentes</h2>

                <div class="faq-section">
                    <div class="faq-item">
                        <div class="faq-question">
                            <span>Managed K8s (EKS, GKE, AKS) e mais seguro que self-managed?</span>
                            <i class="fas fa-chevron-down faq-icon"></i>
                        </div>
                        <div class="faq-answer">
                            <p>Control plane gerenciado elimina responsabilidade de hardening de API server, etcd e kubelet master. Porem, seguranca de workloads (pods, images, RBAC, network policies) continua sua responsabilidade. Managed facilita, mas nao resolve tudo automaticamente.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <span>Service mesh (Istio/Linkerd) e necessario para seguranca?</span>
                            <i class="fas fa-chevron-down faq-icon"></i>
                        </div>
                        <div class="faq-answer">
                            <p>Service mesh adiciona mTLS automatico entre pods, authorization policies e observabilidade. E valioso para zero trust interno, mas adiciona complexidade significativa. Para muitos casos, Network Policies + RBAC adequado sao suficientes. Avalie se a complexidade adicional justifica.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <span>Como lidar com imagens de terceiros sem controle?</span>
                            <i class="fas fa-chevron-down faq-icon"></i>
                        </div>
                        <div class="faq-answer">
                            <p>Mantenha registry interno e faca proxy/cache de imagens externas. Scan todas as imagens antes de permitir no cluster. Use admission controllers para bloquear imagens nao verificadas. Para imagens criticas, considere rebuild com sua propria base image e <a href="../supply-chain-security-cadeia-suprimentos/">verificacao de supply chain</a>.</p>
                        </div>
                    </div>
                </div>

                <h2 id="conclusao">Conclusao</h2>

                <p>
                    Seguranca em Kubernetes requer abordagem em camadas - nao existe bala de prata. Da construcao de imagens ao runtime, cada etapa oferece oportunidades de hardening e pontos de falha potenciais.
                </p>

                <p>
                    Comece pelo basico: imagens minimas, RBAC restritivo, Network Policies com default-deny, Pod Security Standards restricted. Estas medidas eliminam a maioria dos vetores de ataque comuns. Depois, adicione camadas como runtime security (Falco), policy enforcement (OPA), e secret management externo (Vault).
                </p>

                <p>
                    Automatize verificacoes de seguranca no <a href="../devsecops-seguranca-desenvolvimento/">pipeline CI/CD</a> - scanning de imagens, compliance checks, assinatura. Seguranca que depende de processo manual nao escala e falha silenciosamente.
                </p>

                <p>
                    Por fim, trate seguranca K8s como processo continuo. O ecossistema evolui rapidamente, novas vulnerabilidades surgem, best practices mudam. Atualize clusters regularmente, acompanhe CVEs de componentes, e revise configuracoes periodicamente.
                </p>

                <div class="cta-box">
                    <h3>Precisa de Ajuda com Kubernetes Security?</h3>
                    <p>Oferecemos assessment de seguranca de clusters, implementacao de hardening e integracao de ferramentas de seguranca em pipelines.</p>
                    <a href="../../#contato" class="cta-btn">Falar com Especialista</a>
                </div>

                <div class="share-buttons">
                    <span style="color:#94A3B8">Compartilhe:</span>
                    <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://inteligenciabrasil.seg.br/blog/kubernetes-container-security/" target="_blank" class="share-btn linkedin"><i class="fab fa-linkedin-in"></i> LinkedIn</a>
                    <a href="https://twitter.com/intent/tweet?url=https://inteligenciabrasil.seg.br/blog/kubernetes-container-security/&text=Seguranca em Kubernetes e Containers" target="_blank" class="share-btn twitter"><i class="fab fa-twitter"></i> Twitter</a>
                    <a href="https://wa.me/?text=Seguranca Kubernetes https://inteligenciabrasil.seg.br/blog/kubernetes-container-security/" target="_blank" class="share-btn whatsapp"><i class="fab fa-whatsapp"></i> WhatsApp</a>
                </div>

                <div class="author-box">
                    <picture><source type="image/webp" srcset="../../img/logo-white-140x140.webp" width="80" height="80"><img src="../../img/logo-white-140x140.png" alt="Inteligencia Brasil" width="80" height="80"></picture>
                    <div class="author-info">
                        <h4><a href="https://www.linkedin.com/company/inteligenciabrasil" target="_blank" rel="noopener">Inteligencia Brasil</a></h4>
                        <p>Consultoria especializada em DevSecOps, Cloud Security e Seguranca de Containers.</p>
                    </div>
                </div>
            </div>
        </div>
    </article>

    <footer class="footer-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-md-6">
                    <div class="footer-about">
                        <picture><source type="image/webp" srcset="../../img/logo-white-140x140.webp" width="140" height="140"><img src="../../img/logo-white-140x140.png" alt="Inteligencia Brasil" class="footer-logo" width="140" height="140" loading="lazy"></picture>
                        <p>Consultoria especializada em Seguranca, Estrategia e Tecnologia da Informacao.</p>
                        <div class="footer-social">
                            <a href="https://www.linkedin.com/company/inteligenciabrasil" target="_blank"><i class="fab fa-linkedin-in"></i></a>
                            <a href="https://www.instagram.com/inteligenciabrasiloficial/" target="_blank"><i class="fab fa-instagram"></i></a>
                            <a href="https://wa.me/message/WGB5ST6XRIOGH1" target="_blank"><i class="fab fa-whatsapp"></i></a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2 col-md-6">
                    <div class="footer-links">
                        <h4>Artigos Relacionados</h4>
                        <ul>
                            <li><a href="../devsecops-seguranca-desenvolvimento/">DevSecOps</a></li>
                            <li><a href="../supply-chain-security-cadeia-suprimentos/">Supply Chain Security</a></li>
                            <li><a href="../seguranca-cloud-aws-azure-gcp/">Cloud Security</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-2 col-md-6">
                    <div class="footer-links">
                        <h4>Navegacao</h4>
                        <ul>
                            <li><a href="../../">Home</a></li>
                            <li><a href="../../#servicos">Servicos</a></li>
                            <li><a href="../">Blog</a></li>
                            <li><a href="../../#contato">Contato</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="footer-contact">
                        <h4>Contato</h4>
                        <p><i class="fas fa-map-marker-alt"></i> Av. Paulista 807, Sao Paulo - SP</p>
                        <p><i class="fas fa-phone"></i> +55 (11) 99361-9947</p>
                        <p><i class="fas fa-envelope"></i> contato@inteligenciabrasil.seg.br</p>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <div class="row align-items-center">
                    <div class="col-md-6"><p>&copy; 2026 Inteligencia Brasil. Todos os direitos reservados.</p></div>
                    <div class="col-md-6 text-md-right">
                        <a href="../../politica-de-privacidade.html">Politica de Privacidade</a>
                        <span class="separator">|</span>
                        <a href="../../#contato">Contato</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script src="../../js/jquery.min.js"></script>
    <script src="../../js/popper.min.js"></script>
    <script src="../../js/bootstrap.min.js"></script>
    <script src="../../js/jquery.easing.min.js"></script>
    <script>
        $(window).on('scroll load',function(){$('.navbar').offset().top>20?$('.navbar-custom').addClass('top-nav-collapse'):$('.navbar-custom').removeClass('top-nav-collapse')});
        $('a[href^="#"]').on('click',function(e){e.preventDefault();var t=$(this.getAttribute('href'));t.length&&$('html, body').animate({scrollTop:t.offset().top-100},500,'easeInOutExpo')});
        document.querySelectorAll('.faq-question').forEach(function(q){q.addEventListener('click',function(){this.parentElement.classList.toggle('active')})});
    </script>
</body>
</html>
